"use strict";(self.webpackChunklukso_docs=self.webpackChunklukso_docs||[]).push([[864],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=p(a),h=r,m=u["".concat(s,".").concat(h)]||u[h]||c[h]||i;return a?n.createElement(m,o(o({ref:t},d),{},{components:a})):n.createElement(m,o({ref:t},d))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},8843:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var n=a(3117),r=(a(7294),a(3905));const i={sidebar_label:"LSP9 - Vault",sidebar_position:7},o="LSP9 - Vault",l={unversionedId:"standards/universal-profile/lsp9-vault",id:"standards/universal-profile/lsp9-vault",title:"LSP9 - Vault",description:"LSP9 - Vault",source:"@site/docs/standards/universal-profile/lsp9-vault.md",sourceDirName:"standards/universal-profile",slug:"/standards/universal-profile/lsp9-vault",permalink:"/standards/universal-profile/lsp9-vault",draft:!1,editUrl:"https://github.com/lukso-network/docs/tree/main/docs/standards/universal-profile/lsp9-vault.md",tags:[],version:"current",lastUpdatedAt:1662387853,formattedLastUpdatedAt:"Sep 5, 2022",sidebarPosition:7,frontMatter:{sidebar_label:"LSP9 - Vault",sidebar_position:7},sidebar:"standardsSidebar",previous:{title:"LSP6 - Key Manager",permalink:"/standards/universal-profile/lsp6-key-manager"},next:{title:"LSP10 - Received Vaults",permalink:"/standards/universal-profile/lsp10-received-vaults"}},s={},p=[{value:"Introduction",id:"introduction",level:2},{value:"What does this standard represent?",id:"what-does-this-standard-represent",level:2},{value:"ERC725X - Generic Executor",id:"erc725x---generic-executor",level:3},{value:"ERC725Y - Generic Data Key-Value Store",id:"erc725y---generic-data-key-value-store",level:3},{value:"LSP1 - UniversalReceiver",id:"lsp1---universalreceiver",level:3},{value:"Extension",id:"extension",level:2},{value:"Interactivity",id:"interactivity",level:3},{value:"Flow",id:"flow",level:3}],d={toc:p};function c(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"lsp9---vault"},"LSP9 - Vault"),(0,r.kt)("admonition",{title:"Standard Document",type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-9-Vault.md"},"LSP9 - Vault"))),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Using the Key Manager with the Universal Profile will enable third parties to execute through your profile given specific permissions, but this will not eliminate the risk of operating maliciously with your data and belongings."),(0,r.kt)("p",null,"Third parties should be restricted when talking to a specific smart contract through the Universal Profile to avoid this risk when it almost has the same functionalities and is controlled by the Universal Profile."),(0,r.kt)("h2",{id:"what-does-this-standard-represent"},"What does this standard represent?"),(0,r.kt)("p",null,"This standard defines a vault that can hold assets and interact with other contracts. It can ",(0,r.kt)("strong",{parentName:"p"},"attach information")," via ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ethereum/EIPs/blob/master/EIPS/eip-725.md#erc725y"},"ERC725Y")," to itself, ",(0,r.kt)("strong",{parentName:"p"},"execute, deploy or transfer value")," to any other smart contract or EOA via ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ethereum/EIPs/blob/master/EIPS/eip-725.md#erc725x"},"ERC725X"),". It can be ",(0,r.kt)("strong",{parentName:"p"},"notified of incoming assets")," via the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/lukso-network/LIPs/blob/master/LSPs/LSP-1-UniversalReceiver.md"},"LSP1-UniversalReceiver")," function."),(0,r.kt)("p",null,"This standard uses the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://eips.ethereum.org/EIPS/eip-173"},"ERC173"))," standard to provide ownership functions for owning and controlling the implementation contract."),(0,r.kt)("h3",{id:"erc725x---generic-executor"},"ERC725X - Generic Executor"),(0,r.kt)("p",null,"This substandard enables the vault to execute a call on any other smart contracts, transfer the blockchain's native token, or deploy a new smart contract. Only the owner can perform these operations below."),(0,r.kt)("p",null,"The following ",(0,r.kt)("inlineCode",{parentName:"p"},"operationType")," MUST exist:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"0")," for ",(0,r.kt)("inlineCode",{parentName:"li"},"CALL")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"1")," for ",(0,r.kt)("inlineCode",{parentName:"li"},"CREATE")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"2")," for ",(0,r.kt)("inlineCode",{parentName:"li"},"CREATE2")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"3")," for ",(0,r.kt)("inlineCode",{parentName:"li"},"STATICCALL"))),(0,r.kt)("p",null,"The following ",(0,r.kt)("inlineCode",{parentName:"p"},"operationType")," COULD exist:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"4")," for ",(0,r.kt)("inlineCode",{parentName:"li"},"DELEGATECALL")," - ",(0,r.kt)("strong",{parentName:"li"},"NOTE")," This is a potentially dangerous operation")),(0,r.kt)("h3",{id:"erc725y---generic-data-key-value-store"},"ERC725Y - Generic Data Key-Value Store"),(0,r.kt)("p",null,"This substandard enables the vault to hold arbitrary data through a generic data key/value store. It gives flexibility to the contract storage by allowing to attach any information to the contract and update it easily."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The data keys and values are constructed according to the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/generic-standards/lsp2-json-schema"},"LSP2-ERC725YJSONSchema"))," standard.")),(0,r.kt)("h3",{id:"lsp1---universalreceiver"},"LSP1 - UniversalReceiver"),(0,r.kt)("p",null,"This standard enables the vault to be notified of any incoming transactions, whether token transfer, vault transfer, information transfer, etc. Notification is handy for vaults. Within them, anyone could customize how their account reacts to certain tokens by rejecting them or operating a specific call on token receive."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Check ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/generic-standards/lsp1-universal-receiver"},"LSP1-UniversalReceiver"))," standard for more information.")),(0,r.kt)("h2",{id:"extension"},"Extension"),(0,r.kt)("h3",{id:"interactivity"},"Interactivity"),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"The implementation of the ",(0,r.kt)("strong",{parentName:"p"},"UniversalReceiverDelegate")," used by the Universal Profile is different from the one used by the vault. Check ",(0,r.kt)("a",{parentName:"p",href:"/standards/smart-contracts/lsp1-universal-receiver-delegate-vault"},"LSP1UniversalReceiverDelegateVault"))),(0,r.kt)("p",null,"Developers can notify the vault of incoming assets, information, etc., via the ",(0,r.kt)("strong",{parentName:"p"},"universalReceiver")," function. Builders could add an extension to increase the autonomy of the contract by handling and reacting to transactions that the vault receives."),(0,r.kt)("p",null,"Such functionality can be attached by setting an ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/universal-profile/lsp1-universal-receiver-delegate"},"LSP1-UniversalReceiverDelegate"))," to your account."),(0,r.kt)("h3",{id:"flow"},"Flow"),(0,r.kt)("p",null,"Developers could use the vault to hold assets and, as mentioned before, could be used to restrict third parties to only operate on the assets and metadata of the vault and not the Universal Profile. The Universal Profile's metadata and assets are safe if the third party tries to act maliciously."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"1.")," The ",(0,r.kt)("strong",{parentName:"p"},"protocol")," should be allowed to only talk to the vault A1 through ",(0,r.kt)("a",{parentName:"p",href:"./lsp6-key-manager#address-permissions"},"AllowedAddresses permission"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"LSP9 vault allowed in profile",src:a(5819).Z,width:"2883",height:"1387"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"2.")," All the ",(0,r.kt)("strong",{parentName:"p"},"protocol")," transactions should be routed through the vault. Otherwise, the transaction will ",(0,r.kt)("strong",{parentName:"p"},"revert"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"LSP9 vault with third parties flow",src:a(6327).Z,width:"2977",height:"1343"})))}c.isMDXComponent=!0},6327:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/lsp9-vault-flow-ed483895cf7d7b3efaad19b27fd02412.jpeg"},5819:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/vault-flow-f8d1ff75e1ac5733161a91af9178ed74.jpeg"}}]);