"use strict";(self.webpackChunklukso_docs=self.webpackChunklukso_docs||[]).push([[5880],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return v}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=n.createContext({}),l=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=l(e.components);return n.createElement(d.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,s=e.originalType,d=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),m=l(a),v=r,u=m["".concat(d,".").concat(v)]||m[v]||p[v]||s;return a?n.createElement(u,i(i({ref:t},c),{},{components:a})):n.createElement(u,i({ref:t},c))}));function v(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=a.length,i=new Array(s);i[0]=m;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var l=2;l<s;l++)i[l]=a[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},438:function(e,t,a){a.r(t),a.d(t,{assets:function(){return c},contentTitle:function(){return d},default:function(){return v},frontMatter:function(){return o},metadata:function(){return l},toc:function(){return p}});var n=a(7462),r=a(3366),s=(a(7294),a(3905)),i=["components"],o={sidebar_label:"LSP5 - Received Assets",sidebar_position:5},d="LSP5 - Received Assets",l={unversionedId:"standards/universal-profile/lsp5-received-assets",id:"standards/universal-profile/lsp5-received-assets",title:"LSP5 - Received Assets",description:"LSP5 - Received Assets",source:"@site/docs/standards/universal-profile/lsp5-received-assets.md",sourceDirName:"standards/universal-profile",slug:"/standards/universal-profile/lsp5-received-assets",permalink:"/standards/universal-profile/lsp5-received-assets",editUrl:"https://github.com/lukso-network/docs/tree/main/docs/standards/universal-profile/lsp5-received-assets.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_label:"LSP5 - Received Assets",sidebar_position:5},sidebar:"standardsSidebar",previous:{title:"LSP3 - Universal Profile Metadata",permalink:"/standards/universal-profile/lsp3-universal-profile-metadata"},next:{title:"LSP6 - Key Manager",permalink:"/standards/universal-profile/lsp6-key-manager"}},c={},p=[{value:"Introduction",id:"introduction",level:2},{value:"What does this standard represent?",id:"what-does-this-standard-represent",level:2},{value:"<code>LSP5ReceivedAssets[]</code>",id:"lsp5receivedassets",level:3},{value:"<code>LSP5ReceivedAssetsMap</code>",id:"lsp5receivedassetsmap",level:3},{value:"Flow",id:"flow",level:3}],m={toc:p};function v(e){var t=e.components,o=(0,r.Z)(e,i);return(0,s.kt)("wrapper",(0,n.Z)({},m,o,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"lsp5---received-assets"},"LSP5 - Received Assets"),(0,s.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Standard Document")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},(0,s.kt)("a",{parentName:"p",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-5-ReceivedAssets.md"},"LSP5 - Received Assets")))),(0,s.kt)("h2",{id:"introduction"},"Introduction"),(0,s.kt)("p",null,"Keeping track of all the tokens that an address owns is currently unfeasible. If you want to know from which tokens you own, you need to manually import the token contract address and query the balance of your key in it each time for each token. This inconvenience brings light to the following problem: owning tokens without being aware because there are no ways of being notified about the tokens you have received in the first place."),(0,s.kt)("p",null,"One way to solve this problem is to create generic metadata keys that would register in the smart contract storage a) how many different tokens you own and b) the address of the transferred token contracts."),(0,s.kt)("h2",{id:"what-does-this-standard-represent"},"What does this standard represent?"),(0,s.kt)("div",{className:"admonition admonition-success alert alert--success"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Recommendation")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"It is advised to query the ",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("inlineCode",{parentName:"strong"},"LSP5ReceivedAssets[]"))," data key to verify if a contract supports the ",(0,s.kt)("strong",{parentName:"p"},"LSP5 - ReceivedAsset")," standard."))),(0,s.kt)("p",null,"This Metadata standard describes two data keys that can be added to an ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/ethereum/EIPs/blob/master/EIPS/eip-725.md#erc725y"},"ERC725Y")," smart contract to reference and keep track of received assets."),(0,s.kt)("h3",{id:"lsp5receivedassets"},(0,s.kt)("inlineCode",{parentName:"h3"},"LSP5ReceivedAssets[]")),(0,s.kt)("p",null,"This data key represents a list of all tokens and NFTs currently owned by the contract."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "LSP5ReceivedAssets[]",\n  "key": "0x6460ee3c0aac563ccbf76d6e1d07bada78e3a9514e6382b736ed3f478ab7b90b",\n  "keyType": "Array",\n  "valueType": "address",\n  "valueContent": "Address"\n}\n')),(0,s.kt)("h3",{id:"lsp5receivedassetsmap"},(0,s.kt)("inlineCode",{parentName:"h3"},"LSP5ReceivedAssetsMap")),(0,s.kt)("p",null,"This data key represents a map key, both holding:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"the index in the ",(0,s.kt)("a",{parentName:"li",href:"#lsp5receivedassets-"},(0,s.kt)("inlineCode",{parentName:"a"},"LSP5ReceivedAssets[]"))," Array where the received asset addresses are stored, and"),(0,s.kt)("li",{parentName:"ul"},"an ",(0,s.kt)("a",{parentName:"li",href:"https://eips.ethereum.org/EIPS/eip-165"},"ERC165 interface ID")," to quickly identify the standard used by each asset smart contract (without the need to query the asset contracts directly).")),(0,s.kt)("p",null,"The ",(0,s.kt)("inlineCode",{parentName:"p"},"LSP5ReceivedAssetsMap")," data key also helps to prevent adding duplications to the array when automatically added via smart contract (",(0,s.kt)("em",{parentName:"p"},"e.g., ")," an ",(0,s.kt)("a",{parentName:"p",href:"/standards/universal-profile/lsp1-universal-receiver-delegate"},"LSP1-UniversalReceiverDelegate"),")."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "LSP5ReceivedAssetsMap:<address>",\n  "key": "0x812c4334633eb81600000000<address>",\n  "keyType": "Mapping",\n  "valueType": "bytes",\n  "valueContent": "Mixed"\n}\n')),(0,s.kt)("h3",{id:"flow"},"Flow"),(0,s.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"The data keys are also set on the ",(0,s.kt)("strong",{parentName:"p"},"sender Universal Profile")," to remove the token contract address if all the balance is sent."))),(0,s.kt)("p",null,"If set when transferring tokens, these data keys are automatically updated in the Universal Profile storage via the ",(0,s.kt)("a",{parentName:"p",href:"/standards/smart-contracts/lsp1-universal-receiver-delegate-up"},"LSP1UniversalReceiverDelegateUP")," contract."),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"Check the ",(0,s.kt)("a",{parentName:"p",href:"./lsp1-universal-receiver-delegate#token-transfer-scenario"},"token transfer scenario")," for more details."))),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"Token transfer detailed flow",src:a(6132).Z,width:"2933",height:"1363"})),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"LSP5 Received Assets Flow",src:a(9109).Z,width:"3038",height:"1316"})))}v.isMDXComponent=!0},6132:function(e,t,a){t.Z=a.p+"assets/images/detailed-token-transfer-0b79556d7974fdabcbe3abc752d74566.jpeg"},9109:function(e,t,a){t.Z=a.p+"assets/images/lsp5-received-assets-8795001a33b49dd2f61a101969d20394.jpeg"}}]);